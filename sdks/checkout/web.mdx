---
title: 'Checkout – Web'  
sidebarTitle: 'Web'  
'og:description': 'How to set up the Mangopay Checkout SDK on web browsers, including handling 3DS redirection, payment result verification, and offering Apple Pay and Google Pay.'  
---

This guide helps you get started with the Checkout SDK on web browsers.  

<Info>  
**Prerequisite**

- A Mangopay ClientId and API key (get a Sandbox API key for free)  
- A User and their associated Wallet to complete the pay-in  
- A card to register or payment method setup (see [Testing - Payment methods](/testing/payment-methods) for testing information)  

**Supported browsers:** Chrome 117, Firefox 118, Safari 16
</Info>  

## Installation  

You can install the Mangopay Checkout SDK using [npm](https://www.npmjs.com/package/@mangopay/checkout-sdk) or yarn.

```shell Install with npm
npm install --save @mangopay/checkout-sdk
```

```shell Install with Yarn
yarn add @mangopay/checkout-sdk
```  

#### Install via CDN  

If you are using script tags to load files, include the Mangopay SDK script in your HTML:  
```shell HTML script tags
<script src="https://checkout.mangopay.com/sdk/checkout-sdk.min.js"></script>
```  

<Warning>  
**Warning – Load script from Mangopay Checkout domain** 
  
To maintain PCI compliance, the script must be loaded directly from the Mangopay Checkout domain:  

> http<span>://</span>checkout.mangopay.com  

The script must not be bundled or hosted on other domains. You must reference it directly from our domain.  
</Warning>  

### Content Security Policy (CSP)  

<Warning>  
**Caution - Allow policies if using CSP** 
  
If your web page is using the Content-Security-Policy response header, you need to allow the policies below.  
</Warning>

<table>
    <thead>
        <tr>
            <th class="header">Policy</th>
            <th class="header">URLs</th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td class="table-content">script-src</td>
            <td class="table-content">*.google.com</td>
        </tr>
        <tr>
            <td class="table-content">connect-src</td>
            <td class="table-content">	
                api.mangopay.com

                api.sandbox.mangopay.com

                *.payline.com
            </td>
        </tr>
    </tbody>
</table>

## Initialization  

Initialize the SDK and specify the configuration options.  
```javascript Example - Initialization
import { CheckoutSdk } from '@mangopay/checkout-sdk';

const mangopaySdk = await CheckoutSdk.loadCheckoutSdk(elementOrSelector, options);
```  

### Initialization parameters

<table>
    <thead>
        <tr>
            <th class="header">Property</th>
            <th class="header">Type</th>
            <th class="header">Description</th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td class="table-content">`elementOrSelector`</td>
            <td class="table-content">
                HTMLElement | String
                **REQUIRED**
            </td>
            <td class="table-content">The container element or the selector of the container element.</td>
        </tr>
        <tr>
            <td class="table-content">`options`</td>
            <td class="table-content">
                Object \
                **REQUIRED**
            </td>
            <td class="table-content">The options of the Checkout SDK configuration.</td>
        </tr>
    </tbody>
</table>  

### options

<table>
    <thead>
        <tr>
            <th class="header">Property</th>
            <th class="header">Type</th>
            <th class="header">Description</th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td class="table-content">`clientId`</td>
            <td class="table-content">
                String
                **REQUIRED**
            </td>
            <td class="table-content">The unique identifier associated with the Mangopay API key, giving access to the Mangopay API.</td>
        </tr>
        <tr>
            <td class="table-content">`environment`</td>
            <td class="table-content">String</td>
            <td class="table-content">
                The Mangopay environment. \
                **Allowed values:** SANDBOX, PRODUCTION\
                **Default values:** SANDBOX
            </td>
        </tr>
        <tr>
            <td class="table-content">`profilingMerchantId`</td>
            <td class="table-content">
                String
                **REQUIRED**
            </td>
            <td class="table-content">The unique identifier associated with your fraud protection package. Contact Mangopay to obtain this value.</td>
        </tr>
        <tr>
            <td class="table-content">`amount`</td>            
            <td class="table-content">
                String
                **REQUIRED**
            </td>
            <td class="table-content">
                Information about the debited funds.
                The currency (ISO_4217 format) and value (expressed in minor units) of the debited funds.
            </td>
        </tr>
        <tr>
            <td class="table-content">`paymentMethods`</td>
            <td class="table-content">
                Array
                **REQUIRED**
            </td>
            <td class="table-content">
                The payment methods presented to the user.

                Array of objects detailing the `type` and configuration `options` for specific payment methods. Each payment method includes configuration options tailored to its specific requirements.
            </td>
        </tr>
        <tr>
            <td class="table-content">`branding`</td>
            <td class="table-content">Object</td>
            <td class="table-content">The custom branding of the payment page (see Customization section below).</td>
        </tr>
        <tr>
            <td class="table-content">`locale`</td>
            <td class="table-content">String | Object</td>
            <td class="table-content">The language for the payment page. Specify one of the built-in languages (`en`, `fr`) or send an object with custom messages (see Customization section below).</td>
        </tr>
    </tbody>
</table>

## Configuration  

Configure the MangopayCheckout parameters and delegates.  

### Example - Vanilla JS   
```html HTML 
<body>
    <div id="checkoutForm">
        <div id="container"></div>
    </div>
    <script src="/index.js"></script>
</body>
```  
```javascript JavaScript
window.addEventListener('load', async () => {
    const mangopaySdk = await CheckoutSdk.loadCheckoutSdk('#container', options);
    if (!mangopaySdk) {
        throw new Error('Failed to load MangopayCheckoutSdk');
    }

    mangopaySdk.on('error', (event: CustomEvent<ErrorEventDetails>) => console.error(event.detail));

    mangopaySdk.on('tokenizationComplete', (event: CustomEvent<TokenizationCompleteEventDetails>) => {
        // handle tokenization complete
    });

    mangopaySdk.on('paymentComplete', (event: CustomEvent<PaymentCompleteEventDetails>) => {
        // handle payment complete
    });
});
```  

### Example - ReactJS

```javascript JavaScript
import { MangopayCheckout } from '@mangopay/checkout-sdk-react';
const sdkRef = useRef(null);

const onTokenizationComplete = () => {
    /* Handle Card/GooglePay/ApplePay token here
           e.g charge customer card using CardId
    */
};

const onPaymentComplete = () => {
    /* Handle Card/PayPal payment complete */
};

<MangopayCheckout
    ref={sdkRef}
    options={options}
    disabled={disabled}
    onError={onError}
    onLoaded={onLoaded}
    onChange={onChange}
    onTokenizationComplete={onTokenizationComplete}
    onPaymentComplete={onPaymentComplete}
/>
```  

### MangopayCheckout parameters

<table>
    <thead>
        <tr>
            <th class="header">Property</th>
            <th class="header">Type</th>
            <th class="header">Description</th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td class="table-content">`ref`</td>
            <td class="table-content">React.RefObject</td>
            <td class="table-content">React reference object: `import { MangopayCheckoutForwardedRef } from '@mangopay/checkout-sdk-react';`</td>
        </tr>
        <tr>
            <td class="table-content">`onPaymentComplete`</td>
            <td class="table-content">Function(event)</td>
            <td class="table-content">Triggered when the transaction is completed, whatever the outcome (whether successful or failed).</td>
        </tr>
        <tr>
            <td class="table-content">`options`</td>
            <td class="table-content">Object</td>
            <td class="table-content">Checkout SDK configuration options</td>
        </tr>
        <tr>
            <td class="table-content">`disabled`</td>
            <td class="table-content">Boolean</td>
            <td class="table-content">Applies a disabled state to the Checkout component such that user input is not accepted.</td>
        </tr>
        <tr>
            <td class="table-content">`onError`</td>
            <td class="table-content">Function(event)</td>
            <td class="table-content">Triggered when an internal SDK error has occurred.</td>
        </tr>
        <tr>
            <td class="table-content">`onLoaded`</td>
            <td class="table-content">Function(event)</td>
            <td class="table-content">Triggered when the Checkout SDK is loaded.</td>
        </tr>
        <tr>
            <td class="table-content">`onChange`</td>
            <td class="table-content">Function(event)</td>
            <td class="table-content">Triggered when data exposed by the Checkout SDK is changed.</td>
        </tr>
        <tr>
            <td class="table-content">`onTokenizationComplete`</td>
            <td class="table-content">Function(event)</td>
            <td class="table-content">
                Triggered when:
                - A card tokenization is completed and a `CardId` is returned.
                - The user authorizes a Google Pay or Apple Pay payment.
            </td>
        </tr>
        <tr>
            <td class="table-content">`onPaymentComplete`</td>
            <td class="table-content">Function(event)</td>
            <td class="table-content">Triggered when the transaction is completed, whatever the outcome (whether successful or failed).</td>
        </tr>
    </tbody>
</table>

## Handling redirection  

<Warning>  
**Warning – Use Mangopay Checkout domain as return URL** 
  
When making the pay-in request from your backend, use the Mangopay Checkout URL as the `SecureModeReturnURL` or `ReturnURL` (depending on the payment method):  

> http<span>://</span>checkout.mangopay.com  

The user must be returned to this URL after redirection.  
</Warning>  

Some payment methods (card, Google Pay, PayPal) require or may require the user to be redirected to authorize or complete a transaction.  

The Checkout SDK allows you to manage the entire payment flow seamlessly while retaining control over transaction logic in your backend. Once a payment method is selected and payment details are provided, use the `options.onCreatePayment` function to request the transaction from your backend.  

Subsequently, and when necessary for the transaction type, the Checkout SDK seamlessly manages additional redirect actions for 3DS authorization or otherwise validating the payment.  

To manage transaction redirects effectively with the SDK:  

1. In your `paymentMethods` configurations, define an `options.onCreatePayment` attribute as a function.  

2. Within your function:   
- Request a transaction from your server and subsequently, Mangopay.  
- Return the unaltered transaction response object to the SDK.  

3. The SDK:   
- Redirects the user to the payment authentication page when necessary.  
- Manages payment provider redirects back to the SDK.  
- Triggers the `onPaymentComplete` event with the ID and status of the transaction.  
- Confirms the redirect result on your server by invoking the corresponding GET API of the transaction.  
- Presents the payment result to the user.  

```javascript JavaScript - Redirection example
paymentMethods: [
    {
        type: 'card | paypal',
        onCreatePayment: function (event) {
            // 1. implement server-side call to request a transaction.
            // 2. return the card transaction object.
        }
    }
]
```  

## Configuring card payments  

To configure the card payment method, specify `card` as the `type` of the `paymentMethods` object. For the `options`, use the following configuration parameters.  

### options

<table>
    <thead>
        <tr>
            <th class="header">Property</th>
            <th class="header">Type</th>
            <th class="header">Description</th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td class="table-content">`options.supportedCardBrands`</td>
            <td class="table-content">Array
                **REQUIRED**</td>
            <td class="table-content">
                The card brands supported.\
                **Allowed values:** VISA, MASTERCARD, AMERICAN_EXPRESS, MAESTRO, CB
            </td>
        </tr>
        <tr>
            <td class="table-content">`options.onCreateCardRegistration`</td>
            <td class="table-content">Function
                **REQUIRED**</td>
            <td class="table-content">Use this attribute to request and return a Card Registration.</td>
        </tr>
        <tr>
            <td class="table-content">`options.onCreatePayment`</td>
            <td class="table-content">Function
                **REQUIRED**</td>
            <td class="table-content">To handle 3DS redirects for card payments, use this attribute to request and return a pay-in.</td>
        </tr>
    </tbody>
</table>

### Card configuration example  
```javascript JavaScript
const options = {
    clientId: 'MANGOPAY_CLIENT_ID',
    environment: 'SANDBOX | PRODUCTION',
    amount: {
        value: 1000,
        currency: "EUR"
    },
    paymentMethods: [
        {
            type: 'card',
            onCreateCardRegistration: function (event) {
                // 1. implement server-side call to create a card registration.
                // 2. return the card registration.
            },
            onCreatePayment: function (event: paymentMethod) {
                // 1. implement server-side call to request a card transaction.
                // 2. return the card transaction object.
                // 3. the SDK handles 3DS redirect for you.
            }
        }
    ]
};
const mangopaySdk = await CheckoutSdk.loadCheckoutSdk(elementOrSelector, options);
```  

### Card tokenization  

In the `options` for the card payment method, create a function to handle creation of Card Registration event handler in the `paymentMethods` object:  
- Your `onCreateCardRegistration` function calls your server, and passes it the card brand of the user.  
- Your server makes a request to [Create a Card Registration](/api-reference/card-registrations/create-card-registration).  
- In response, your server receives a Card Registration object.  
- In your `onCreateCardRegistration` function, return the unmodified Card Registration object to the SDK.  
- The SDK [tokenizes the card](/api-reference/card-registrations/tokenize-card) and [updates the Card Registration](/api-reference/card-registrations/update-card-registration) object to create the `CardId` which is used for payment.  

```javascript JavaScript - Card tokenization example
// Vanilla JS
mangopaySdk.on('tokenizationComplete', (event: CustomEvent<TokenizationCompleteEventDetails>) => {
    // handle tokenization complete
});

mangopaySdk.on('paymentComplete', (event: CustomEvent<PaymentCompleteEventDetails>) => {
    // handle payment complete
});

// React.js
const onTokenizationComplete = () => {
    // handle tokenization complete
};

const onPaymentComplete = () => {
    // handle payment complete
};

<MangopayCheckout
    ref={sdkRef}
    options={options}
    onTokenizationComplete={onTokenizationComplete}
    onPaymentComplete={onPaymentComplete}
/>
```  

### tokenizationComplete output  
```json REST
{
  "Id": "cardreg_m_01HQ0J6GB3JFZ1NC5EGCJBE4PB",
  "Tag": null,
  "CreationDate": 1708342329,
  "UserId": "user_m_01HP6ZG0XXZ89V34GRZEY9HQCE",
  "AccessKey": "1X0m87dmM2LiwFgxPLBJ",
  "PreregistrationData": "YkgVxL1yNY4ZOfKtqEew_Zj34Eg4_H3r-UyvrLWB_MHYF1OqkWAtDMwDMZ0pSZfliRF4hvSrtJCvT7-9XAi0Xsj7Q1OS-vT4lpHzEztZoLs",
  "RegistrationData": "data=iN_eoipU7i2AEuTss7wuoPRZYTuNVHlTvhc4dEXHczhSWquUg8N2vrbXU91rCDepo0Fw6rcqxRBK8KMWk8xhHGOBEuIr9_d-Xo64K6cr5w-lY2yXbTUOs7e-S6CpTShm",
  "CardId": "card_m_01HQ0J6H02QXH3HATEYW0FMJKP",
  "CardType": "CB_VISA_MASTERCARD",
  "CardRegistrationURL": "https://homologation-webpayment.payline.com/webpayment/getToken",
  "ResultCode": "000000",
  "ResultMessage": "Success",
  "Currency": "EUR",
  "Status": "VALIDATED"
  "ProfilingAttemptReference": "25e5c450-7f00-4805-af04-4330e4dc0cee"
}
```  

### Managing cards  

You can use the following endpoints to manage cards:  
- [View a Card](/api-reference/cards/view-card) provides key information about the card, including its Fingerprint which can be used as an anti-fraud tool  
- [Deactivate or edit a Card](/api-reference/cards/deactivate-edit-card) allows you to irreversibly set the card as inactive  

<Warning>  
**Warning - End user's approval needed to save card details** 
  
Under no circumstances should card information be kept without the end user's approval.   
If you don’t have the end user’s approval, you need to deactivate the card systematically after use in your implementation.  
</Warning>  

### Requesting card payments  

You can use a registered card (`CardId`) for requests with the following objects. In your request, ensure that the `SecureModeReturnURL` parameter is set to `https://checkout.mangopay.com`.  
- [The Card Validation object](/api-reference/card-validations/card-validation-object), to validate a card without debit  
- [The Direct Card PayIn object](/api-reference/direct-card-payins/direct-card-payin-object), for one-shot card payments  
- [The Recurring PayIn Registration object](/api-reference/recurring-card-payins/recurring-payin-registration-object), for recurring card payments  
- [The Preauthorization object](/api-reference/preauthorizations/preauthorization-object), for 7-day preauthorized card payments  
- [The Deposit Preauthorization object](/api-reference/deposit-preauthorizations/deposit-preauthorization-object), for 30-day preauthorized card payments  

## Configuring Apple Pay  

<Note>  
**Note - Apple Pay integration required** 
  
Offering Apple Pay requires additional setup by the platform, including certification and integration. For more information, see the [How to process an Apple Pay payment](/guides/payment-methods/apple-pay/how-to) tutorial.   
</Note>  

<Warning>  
**Caution - Apple Pay on the Web availability** 
  
[Apple Pay on the Web](https://developer.apple.com/documentation/apple_pay_on_the_web/), using the JavaScript Checkout SDK, is only available on Safari browsers on Mac and iOS devices. Apple Pay on the Web also requires additional certification.  
</Warning>  

To configure the Apple Pay payment method, specify `apple_pay` as the `type` of the `paymentMethods` object. For the `options`, use the following configuration parameters.   

### Apple Pay configuration parameters  

#### paymentRequest

<table>
    <thead>
        <tr>
            <th class="header">Property</th>
            <th class="header">Type</th>
            <th class="header">Description</th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td class="table-content">`countryCode`</td>
            <td class="table-content">String</td>
            <td class="table-content">The platform’s two-letter ISO 3166 country code.</td>
        </tr>
        <tr>
            <td class="table-content">`currencyCode`</td>
            <td class="table-content">String</td>
            <td class="table-content">The three-letter <a href="/api-reference/overview/data-formats" target="_blank">ISO 4217 code</a> (EUR, GBP, etc) of a <a href="/guides/currencies" target="_blank">supported currency</a> (depends on feature, contract, and activation settings).</td>
        </tr>
        <tr>
            <td class="table-content">`merchantCapabilities`</td>
            <td class="table-content">Array</td>
            <td class="table-content">Information about the card types and authentication protocols you support (see [Apple Pay documentation](https://developer.apple.com/documentation/apple_pay_on_the_web/applepaypaymentrequest/1916123-merchantcapabilities)).</td>
        </tr>
        <tr>
            <td class="table-content">`supportedNetworks`</td>
            <td class="table-content">Array</td>
            <td class="table-content">
                The card networks supported by Mangopay: `VISA` and `MASTERCARD`.\
                **Allowed values:** VISA, MASTERCARD
            </td>
        </tr>
        <tr>
            <td class="table-content">`total`</td>
            <td class="table-content">Object</td>
            <td class="table-content">The line item total for the payment (see Apple Pay documentation).</td>
        </tr>
        <tr>
            <td class="table-content">`merchantIdentifier`</td>
            <td class="table-content">String</td>
            <td class="table-content">Your platform’s Apple Pay Merchant ID.</td>
        </tr>
        <tr>
            <td class="table-content">`merchantName`</td>
            <td class="table-content">String</td>
            <td class="table-content">The name of your platform.</td>
        </tr>
        <tr>
            <td class="table-content">`onValidateMerchant`</td>
            <td class="table-content">Function</td>
            <td class="table-content">Function called when the SDK receives an onvalidatemerchant merchant event from the Apple Pay sheet. This function should implement backend creation of the [merchant session object](https://developer.apple.com/documentation/apple_pay_on_the_web/apple_pay_js_api/creating_an_apple_pay_session). After creating the session object, return the session object to the SDK.</td>
        </tr>
    </tbody>
</table> 

### Optional configuration parameters

<table>
    <thead>
        <tr>
            <th class="header">Property</th>
            <th class="header">Type</th>
            <th class="header">Description</th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td class="table-content">`requiredBillingContactFields`</td>
            <td class="table-content">Array</td>
            <td class="table-content">The billing information to fulfill the order (see [Apple Pay documentation](https://developer.apple.com/documentation/apple_pay_on_the_web/applepaypaymentrequest/2216120-requiredbillingcontactfields)).</td>
        </tr>
        <tr>
            <td class="table-content">`requiredShippingContactFields`</td>
            <td class="table-content">Array</td>
            <td class="table-content">The shipping information to fulfill the order (see [Apple Pay documentation](https://developer.apple.com/documentation/apple_pay_on_the_web/applepaypaymentrequest/2216121-requiredshippingcontactfields)).</td>
        </tr>
        <tr>
            <td class="table-content">`billingContact`</td>
            <td class="table-content">Object</td>
            <td class="table-content">The billing contact information for the user (see [Apple Pay documentation](https://developer.apple.com/documentation/apple_pay_on_the_web/applepaypaymentrequest/1916125-billingcontact)).</td>
        </tr>
        <tr>
            <td class="table-content">`shippingContact`</td>
            <td class="table-content">Object</td>
            <td class="table-content">The shipping contact information for the user (see [Apple Pay documentation](https://developer.apple.com/documentation/apple_pay_on_the_web/applepaypaymentrequest/1916127-shippingcontact)).</td>
        </tr>
    </tbody>
</table>

#### Apple Pay Merchant Session

<table>
    <thead>
        <tr>
            <th class="header">Property</th>
            <th class="header">Type</th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td class="table-content">`epochTimestamp`</td>
            <td class="table-content">Number</td>
        </tr>
        <tr>
            <td class="table-content">`expiresAt`</td>
            <td class="table-content">Number</td>
        </tr>
        <tr>
            <td class="table-content">`merchantSessionIdentifier`</td>
            <td class="table-content">String</td>
        </tr>
        <tr>
            <td class="table-content">`nonce`</td>
            <td class="table-content">String</td>
        </tr>
        <tr>
            <td class="table-content">`merchantIdentifier`</td>
            <td class="table-content">String</td>
        </tr>
        <tr>
            <td class="table-content">`domainName`</td>
            <td class="table-content">String</td>
        </tr>
        <tr>
            <td class="table-content">`displayName`</td>
            <td class="table-content">String</td>
        </tr>
        <tr>
            <td class="table-content">`signature`</td>
            <td class="table-content">String</td>
        </tr>
    </tbody>
</table>

### Apple Pay configuration example  
```javascript JavaScript
const validateApplePayMerchant = (validationURL: string): Promise<ApplePayMerchantSession> => {
    return HttpClient.request < ApplePayMerchantSession > (
        'https://backend-api-url/get-apple-pay-session',
        {
            validationURL,
            merchantIdentifier: 'merchant.com.example.mystore',
            displayName: 'MyStore',
            initiative: 'web',
            initiativeContext: 'mystore.example.com'
        }
    );
};

const options = {
    clientId: 'MANGOPAY_CLIENT_ID',
    environment: 'SANDBOX | PRODUCTION',
    paymentMethods: [
        {
            type: 'apple_pay',
            options: {
                paymentRequest: {
                    countryCode: 'IE',
                    currencyCode: 'EUR',
                    merchantCapabilities: ['supports3DS'],
                    supportedNetworks: ['visa', 'masterCard'],
                    total: {
                        label: 'Demo (Card is not charged)',
                        type: 'final',
                        amount: '20.00',
                    },
                    merchantIdentifier: 'merchant.com.example.mystore',
                    merchantName: 'MyStore',
                    onValidateMerchant: validateApplePayMerchant,
                    requiredBillingContactFields: ['email'],
                },
            },
        }
    ]
};

// Vanilla JS
const mangopaySdk = await CheckoutSdk.loadCheckoutSdk(elementOrSelector, options);

// React.js
<MangopayCheckout ref={sdkRef} options={options} />
```  

### Requesting the merchantSession from your server  

Displaying the Apple Pay payment sheet using the Mangopay Checkout SDK works as follows:  
1. You generate the merchant session from your server  
2. The SDK’s `onValidateMerchant` function calls your server and passes it the static hostname `apple-pay-gateway.apple.com` as the validation URL. In the China region, use `cn-apple-pay-gateway.apple.com`.  
3. Your server uses the validation URL to request a session from the Apple Pay server, as described in [Requesting an Apple Pay Payment Session](https://developer.apple.com/documentation/apple_pay_on_the_web/apple_pay_js_api/requesting_an_apple_pay_payment_session).  
4. In the response, your server receives an opaque merchant session object, `MerchantSession`.  
5. You pass the merchant session object to the `completeMerchantValidation` method of the SDK (see [Apple Pay documentation](https://developer.apple.com/documentation/apple_pay_on_the_web/applepaysession/1778015-completemerchantvalidation) for more information on this method).  

  

### Requesting Apple Pay pay-in  

To request the payment, use the [Create a Apple Pay PayIn](/api-reference/apple-pay/create-apple-pay-payin) endpoint and include the Apple Pay `PaymentData`.  

## Configuring Google Pay  

<Note>  
**Note - Google Pay setup required** 
  
Offering Google Pay requires additional setup by the platform. For more information, see the [How to process a Google Pay payment](/guides/payment-methods/google-pay/how-to) tutorial.   
</Note>  

To configure the Google Pay payment method, specify `google_pay` as the `type` of the `paymentMethods` object. For the `options`, use the following configuration parameters.  

### Configuring Google Pay  

#### merchantInfo

<table>
    <thead>
        <tr>
            <th class="header">Property</th>
            <th class="header">Type</th>
            <th class="header">Description</th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td class="table-content">`merchantId`</td>
            <td class="table-content">String</td>
            <td class="table-content">Your Mangopay `ClientId`.</td>
        </tr>
        <tr>
            <td class="table-content">`merchantName`</td>
            <td class="table-content">String</td>
            <td class="table-content">The name of your platform. If a merchant is recognized, the message displayed in the payment sheet is “Pay Unverified Merchant”. For more information, see the [Google Pay documentation](https://developers.google.com/pay/api/android/reference/request-objects#MerchantInfo).</td>
        </tr>
    </tbody>
</table>

#### cardParameters

<table>
    <thead>
        <tr>
            <th class="header">Property</th>
            <th class="header">Type</th>
            <th class="header">Description</th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td class="table-content">`allowedAuthMethods`</td>
            <td class="table-content">Array</td>
            <td class="table-content">
                The supported authentication methods: PAN_ONLY, meaning the card is registered in the user’s Google account and requires additional authentication; CRYPTOGRAM_3DS, meaning the card is enrolled in the customer’s Google Wallet and authentication is handled by Google, with no 3DS redirection and no liability for the platform.\
                **Allowed values:** PAN_ONLY, CRYPTOGRAM_3DS
            </td>
        </tr>
        <tr>
            <td class="table-content">`allowedCardNetworks `</td>
            <td class="table-content">Array</td>
            <td class="table-content">
                The card networks supported by Mangopay: VISA and MASTERCARD.\
                **Allowed values:** VISA, MASTERCARD
            </td>
        </tr>
        <tr>
            <td class="table-content">`gateway`</td>
            <td class="table-content">String</td>
            <td class="table-content">
                The orchestration used: in this case, whenthen.\
                **Allowed values:** whenthen
            </td>
        </tr>
    </tbody>
</table> 

#### button

<table>
    <thead>
        <tr>
            <th class="header">Property</th>
            <th class="header">Type</th>
            <th class="header">Description</th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td class="table-content">`buttonColor`</td>
            <td class="table-content">String</td>
            <td class="table-content">
                **Default value:** default

                **Allowed values:**
                - default – A Google-selected default value. Currently black but it may change over time.
                - black – A black button suitable for use on white or light backgrounds.
                - white – A white button suitable for use on colorful backgrounds.
            </td>
        </tr>
        <tr>
            <td class="table-content">`buttonType`</td>
            <td class="table-content">String</td>
            <td class="table-content">
                **Default value:** buy

                **Allowed values:** 
                - book – The "Book with Google Pay" payment button.
                - buy – The "Buy with Google Pay" payment button.
                - checkout – The "Checkout with Google Pay" payment button.
                - donate – The "Donate with Google Pay" payment button.
                - order – The "Order with Google Pay" payment button.
                - pay – The "Pay with Google Pay" payment button.
                - plain – The Google Pay payment button without the additional text.
                - subscribe – The "Subscribe with Google Pay" payment button.
            </td>
        </tr>
        <tr>
            <td class="table-content">`buttonLocale`</td>
            <td class="table-content">String</td>
            <td class="table-content">
                The ISO 639-1 code represents the desired button language.

                **Default value:** The browser or operating system language settings.

                **Allowed values:** en, ar, bg, ca, cs, da, de, el, es, et, fi, fr, hr, id, it, ja, ko, ms, nl, no, pl, pt, ru, sk, sl, sr, sv, th, tr, uk, and zh.
            </td>
        </tr>
    </tbody>
</table> 

#### transactionInfo  

Information about the transaction and its authorization, such as whether the user agrees to the transaction, the total price and price status. For more information on this object parameter, see the [Google Pay documentation](https://developers.google.com/pay/api/web/reference/request-objects#TransactionInfo).
  
```javascript JavaScript - Google Pay configuration example
const options = {
    clientId: 'MANGOPAY_CLIENT_ID',
    environment: 'SANDBOX | PRODUCTION',
    paymentMethods: [
        {
            type: 'google_pay',
            options: {
                merchantInfo: {
                    merchantId: 'test',
                    merchantName: 'Test',
                },
                gateway: 'whenthen',
                cardParameters: {
                    allowedAuthMethods: ['PAN_ONLY', 'CRYPTOGRAM_3DS'],
                    allowedCardNetworks: ['VISA', 'MASTERCARD'],
                },
                transactionInfo: {
                    totalPrice: '20.00',
                    totalPriceStatus: 'FINAL',
                    currencyCode: 'EUR',
                    countryCode: 'DE', // required for EEA only
                    transactionId: '123456789',
                    totalPriceLabel: '20.00', // required if displayItems is provided
                    displayItems: [
                        {
                            label: 'PS5',
                            type: 'SUBTOTAL',
                            price: '20.00',
                        },
                    ],
                },
                paymentData: {
                    emailRequired: true,
                },
            },
        }
    ]
};

// Vanilla JS
const mangopaySdk = await CheckoutSdk.loadCheckoutSdk(elementOrSelector, options);

// React.js
<MangopayCheckout ref={sdkRef} options={options} />
```  

### Handling Google Pay authorization  

The `onTokenizationComplete` function is called after the user approves the payment on the Google Pay form. The output contains the paymentData object (see [Google Pay documentation](https://developers.google.com/pay/api/web/reference/response-objects#PaymentData)) which is needed to request the Google Pay payment via the API from your backend.  

### Requesting Google Pay pay-in  

To request the payment, use the [Create a Google Pay PayIn](/api-reference/google-pay/create-google-pay-payin) endpoint. Include the Google Pay `PaymentData` and ensure that the `SecureModeReturnURL` parameter is set to `https://checkout.mangopay.com`.  

### Configuring PayPal  

<Note>  
**Note – PayPal setup required** 
  
Offering PayPal requires approval from PayPal and activation. For more information, see the [PayPal](/guides/payment-methods/paypal) article.  
</Note>  

To configure PayPal, specify `paypal` as the `type` of the `paymentMethods` object. For the `options`, use the following configuration parameters.

<table>
    <thead>
        <tr>
            <th class="header">Property</th>
            <th class="header">Type</th>
            <th class="header">Description</th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td class="table-content">`options.onCreatePayment`</td>
            <td class="table-content">Function
                **REQUIRED**</td>
            <td class="table-content">Use this attribute to request and return a PayPal pay-in.</td>
        </tr>
    </tbody>
</table>

```javascript JavaScript - PayPal configuration example
const options = {
    clientId: 'MANGOPAY_CLIENT_ID',
    environment: 'SANDBOX | PRODUCTION',
    amount: {
        value: 1000,
        currency: "EUR"
    },
    paymentMethods: [
        {
        type: "paypal",
        options: {
          //define delegate to call when Paypal button is clicked
          onCreatePayment: (data) => createPayPalPayIn(data)
            }
        }
    ]
};
const mangopaySdk = await CheckoutSdk.loadCheckoutSdk(elementOrSelector, options);

//this event is triggered when redirect/payment is completed
mangopaySdk.on('paymentComplete', (event: CustomEvent<PaymentCompleteEventDetails>) => {
    //  verify payment result
    //  unmount checkout and present payment result.
});
```  

### Requesting PayPal pay-in  

To request the payment, use the [Create a PayPal PayIn](/api-reference/paypal/create-paypal-payin) endpoint. Ensure that the `ReturnURL` parameter is set to `https://checkout.mangopay.com`.  

## Verifying the payment result  

Once `onPaymentComplete` is triggered, verify the status of the relevant Mangopay API object:  
- [View a PayIn](/api-reference/direct-card-payins/view-payin-direct-card)  
- [View a Preauthorization](/api-reference/preauthorizations/view-preauthorization)
- [View a Deposit Preauthorization](/api-reference/deposit-preauthorizations/view-deposit-preauthorization)  
- [View a Card Validation](/api-reference/card-validations/view-card-validation)  

<Warning>  
**Caution – Check payment result from backend** 
  
You should confirm the transaction result returned by the Checkout SDK by calling the Mangopay API from your backend.  
</Warning>  
```javascript Verify payment result
//This event is triggerd by the SDK when a full payment cycle is complete.
mangopaySdk.on('paymentComplete', (event: CustomEvent<PaymentCompleteEventDetails>) => {

    const { id } = event.details

    // 1. Verify payment result using the transaction Id.
    // 2. Present payment result to user.
});
```  

## Showing and dismissing the loading spinner  

When processing a token request, the SDK shows a loading spinner and retains it until the loading state is set to `false`. This provides a temporary state for the user until the full payment is complete, including calls from your platform's backend.  

The `setLoading` method handles the loading state for displaying and dismissing the spinner.  
```json REST - setLoading example
import { CheckoutSdk } from '@mangopay/checkout-sdk';
const mangopaySdk = await CheckoutSdk.loadCheckoutSdk('#container', options);
// dismiss the  loader spinner
mangopaySdk.setLoading(false);
```  

## Using Card Element  

Card Element is a ready-made component that allows you to create your own card payment experience and tokenize card payment details. With Card Element, you can incorporate a custom pay button and have control over the tokenization process.  

When using Card Element, you still benefit from real-time card data validation, and the ability to customize the payment form.  

Initialize the `cardFormElement` with your `ClientId` and select your environment (Sandbox or Production).  
```shell Initialization - cardFormElement
import MangopaySdkLoader from '@mangopay/sdk-loader';

const cardFormElement = await MangopaySdkLoader.loadCardFormElement(elementOrSelector, options);
```  

### cardFormElement-specific options

<table>
    <thead>
        <tr>
            <th class="header">Property</th>
            <th class="header">Type</th>
            <th class="header">Description</th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td class="table-content">`paymentMethod`</td>
            <td class="table-content">Object</td>
            <td class="table-content">The payment method used with the card form element. Only `'card’` is supported. See payment methods for more details.
                **Allowed values:** 'card'</td>
        </tr>
    </tbody>
</table>  

### Vanilla JS usage example  
```html HTML
<body>
    <form novalidate id="checkoutForm">
        <div id="container"></div>
        <button type="submit" id="submitButton">Pay now</button>
    </form>
    <script src="/index.js"></script>
</body>
```  

```javascript JavaScript
window.addEventListener('load', async () => {
    const cardFormElement = await MangopaySdkLoader.loadCardFormElement('#container', options);
    if (!cardFormElement) {
        throw new Error('Failed to load MangopayCardFormElement');
    }

    const submitButton = document.querySelector('#submitButton');
    if (!submitButton) {
        throw new Error('Submit button is missing.');
    }

    submitButton.addEventListener('click', async (event) => {
        event.preventDefault();
        cardFormElement.disable();
        try {
            cardFormElement.completePayment();
        } finally {
            cardFormElement.enable();
        }
    });

    cardFormElement.on('error', (event: CustomEvent<ErrorEventDetails>) => console.error(event.detail));

    cardFormElement.on('tokenizationComplete', (event: CustomEvent<TokenizationCompleteEventDetails>) => {
        // handle tokenization complete
    });
});
```  

### ReactJS usage example  
```javascript Javascript
import { CardFormElement } from '@mangopay/checkout-sdk-react';
const sdkRef = useRef(null);

const onTokenizationComplete = () => {
    /* Handle Card token here
           e.g charge customer card using CardId
    */
};

<>
    <form noValidate>
        <CardFormElement
            ref={sdkRef}
            options={options}
            disabled={disabled}
            onError={onError}
            onLoaded={onLoaded}
            onChange={onChange}
            onTokenizationComplete={onTokenizationComplete}
        />
    </form>
    <button onClick={handleCompletePayment} className="btn pay-btn">
        Pay now
    </button>
</>
```  

## Branding  

You can customize the appearance of the payment sheet using the `branding` object.  
```javascript JavaScript - Branding example
const options = {
    branding: {
        fontFamily: 'Helvetica Neue',
        fontSize: {
            primary: '14px',
            secondary: '12px',
        },
        borderType: 'square', // 'square' | 'round' | 'bottom'
        colors: {
            primary: '#000000',
            secondary: '#545A61',
            accent: '#4E40EF',
            accentContrast: '#FFFFFF',
            border: '#E6E9EC',
            borderFocused: '#000000',
            error: '#EC0B43',
        },
        borderRadius: '0',
        backgroundColor: '#ffffff',
        textColor: '#000000',
        lineHeight: '48px',
        variables: undefined,
        rules: undefined,
    },
},
};

// Vanilla JS
const mangopaySdk = await MangopaySdkLoader.loadCheckoutSdk('#container', options);

// React.js
<MangopayCheckout ref={sdkRef} options={options} />
```  

### Theme variables and rules  

You can use the `rules` and `variables` objects for further customization.  

#### Variables  

Variables are CSS variables that you can declare and use in your theme rules.  
```javascript JavaScript
{
    theme: {
    ...,
        variables: {
            primaryColor: "#1D3557"
            secondaryColor: "#457B9D"
        }

        rules: {
            PayButton: `
            backgroundColor: var(--primaryColor);
            `
        }
    }
}
```  

#### Rules  

Rules allows you to apply CSS styles to Checkout SDK components. To do so, target components by class names, with or without the CSS class selector prefix (`FieldContainer` or `.FieldContainer`), and specify the styles to apply. The feature supports all native CSS properties and nesting.  
```javascript JavaScript
{
    theme: {
      ...,
        variables: {
            primaryColor: "#1D3557"
            secondaryColor: "#457B9D"
        }

        rules: {
            '.FieldContainer': `
              height: 40px;
              border-radius: 8px;
              backgroundColor: var(--primaryColor);
              
              &:hover {
                backgroundColor: var(--secondaryColor);
              }
          `
        }
    }
}
```  

## Localization  

Mangopay Checkout SDK has built-in support for English and French localization.  
```javascript JavaScript
const options = {
    locale: 'en', // 'en' | 'fr' | Object
};

// Vanilla JS
const mangopaySdk = await MangopaySdkLoader.loadCheckoutSdk('#container', options);

// React.js
<MangopayCheckout ref={sdkRef} options={options} />
```  

You can customize labels, placeholder and success and error messages by providing a `customLanguage` object.  
```javascript JavaScript
const customLanguage = {

    'card.number.placeholder': '1234 1234 1234 1234',
    'card.number.aria-label': 'Card number',
    'card.number.errors.required': 'Card number is required',
    'card.number.errors.min-length': 'Minimum number of digits is 13',
    'card.number.errors.invalid-number': 'Invalid card number',

    'card.save.label': 'Save card',
    'card.saved-cards.choose-card.label': 'Choose card',
    'card.saved-cards.clear-card.label': 'Clear',
    'card.saved-cards.saved-card.aria-label': 'The card ending in',

    'card.billing-name.placeholder': 'Name on card',
    'card.billing-name.aria-label': 'Name on card',
    'card.billing-name.errors.required': 'Full name is required',
    'card.billing-name.errors.min-length': 'Full name is too short',

    'card.expiry.placeholder': 'MM / YY',
    'card.expiry.aria-label': 'Card expiration',
    'card.expiry.errors.required': 'Expiration date is required',
    'card.expiry.errors.pattern': 'Expiration date format is not valid (MM/YY)',
    'card.expiry.errors.expired': 'Your card is expired',

    'card.cvc.placeholder': 'CVC',
    'card.cvc.aria-label': 'Card CVC',
    'card.cvc.errors.required': 'Security code is required',
    'card.cvc.errors.min-length': 'Security code is too short',
    'card.cvc.errors.max-length': 'Security code is too long',

    'pay-button.label': 'Pay',
    'pay-button.aria-label': 'Pay with card',


    'payment-success-state.label': 'Payment Succeeded',

    'error.invalid_cvc': 'Invalid CVC',
    'error.authorization_required': 'Authorization Required',
    'error.contact_card_issuer': 'Contact Card Issuer',
    'error.unsupported_card': 'Unsupported Card',
    'error.insufficient_funds': 'Insufficient Funds',
    'error.unsupported_currency': 'Unsupported Currency',
    'error.card_rejected': 'Card Rejected',
    'error.expired_card': 'Expired Card',
    'error.suspected_fraud': 'Suspected Fraud',
    'error.general_decline': 'General Decline',
    'error.incorrect_number': 'Incorrect Number',
    'error.incorrect_pin': 'Incorrect Pin',
    'error.invalid_address': 'Invalid Address',
    'error.invalid_card_or_account': 'Invalid Card or Account',
    'error.invalid_amount': 'Invalid Amount',
    'error.invalid_date': 'Invalid Date',
    'error.lost_restricted_or_stolen_card': 'Lost, Restricted or Stolen Card',
    'error.blocked_list': 'Blocked List',
    'error.not_permitted': 'Not Permitted',
    'error.offline_or_online_pin_required': 'Offline or Online Pin Required',
    'error.pin_retry_exceeded': 'Pin Retry Exceeded',
    'error.processing_error': 'Processing Error',
    'error.withdrawal_count_limit_exceeded': 'Withdrawal Count Limit Exceeded',
    'error.unknown': 'Unknown error',
    'error.fraud': 'Fraud',
    'error.three_d_secure': '3DS Failed',
    'error.custom_rule': 'Custom Rule',
};

const options = {
    locale: customLanguage
};

// Vanilla JS
const mangopaySdk = await MangopaySdkLoader.loadCheckoutSdk('#container', options);

// React.js
<MangopayCheckout ref={sdkRef} options={options} />
```